import{d as me}from"./chunk-2JLCVH2Z.js";import{$a as b,Aa as Z,Ba as Q,Bb as ae,Cb as ie,Da as Y,Db as re,Fa as $,Gb as V,Ib as se,Ka as I,La as L,N as z,O as F,Pa as E,Pb as ce,Q as W,Qa as T,Ra as H,Sa as J,Ua as X,Va as ee,Y as D,Z as q,Za as S,_a as C,da as K,db as te,ga as U,ib as R,jb as B,la as j,ob as ne,ra as P,sa as x,wa as g,zb as oe}from"./chunk-K7NCM4M7.js";import{f as G}from"./chunk-25N2FLV6.js";var le=[{code:"AF",name:"Afghanistan"},{code:"AX",name:"\xC5land Islands"},{code:"AL",name:"Albania"},{code:"DZ",name:"Algeria"},{code:"AS",name:"American Samoa"},{code:"AD",name:"Andorra"},{code:"AO",name:"Angola"},{code:"AI",name:"Anguilla"},{code:"AQ",name:"Antarctica"},{code:"AG",name:"Antigua and Barbuda"},{code:"AR",name:"Argentina"},{code:"AM",name:"Armenia"},{code:"AW",name:"Aruba"},{code:"AU",name:"Australia"},{code:"AT",name:"Austria"},{code:"AZ",name:"Azerbaijan"},{code:"BS",name:"Bahamas"},{code:"BH",name:"Bahrain"},{code:"BD",name:"Bangladesh"},{code:"BB",name:"Barbados"},{code:"BY",name:"Belarus"},{code:"BE",name:"Belgium"},{code:"BZ",name:"Belize"},{code:"BJ",name:"Benin"},{code:"BM",name:"Bermuda"},{code:"BT",name:"Bhutan"},{code:"BO",name:"Bolivia"},{code:"BA",name:"Bosnia and Herzegovina"},{code:"BW",name:"Botswana"},{code:"BV",name:"Bouvet Island"},{code:"BR",name:"Brazil"},{code:"IO",name:"British Indian Ocean Territory"},{code:"VG",name:"British Virgin Islands"},{code:"BN",name:"Brunei"},{code:"BG",name:"Bulgaria"},{code:"BF",name:"Burkina Faso"},{code:"BI",name:"Burundi"},{code:"KH",name:"Cambodia"},{code:"CM",name:"Cameroon"},{code:"CA",name:"Canada"},{code:"CV",name:"Cape Verde"},{code:"BQ",name:"Caribbean Netherlands"},{code:"KY",name:"Cayman Islands"},{code:"CF",name:"Central African Republic"},{code:"TD",name:"Chad"},{code:"CL",name:"Chile"},{code:"CN",name:"China"},{code:"CX",name:"Christmas Island"},{code:"CC",name:"Cocos (Keeling) Islands"},{code:"CO",name:"Colombia"},{code:"KM",name:"Comoros"},{code:"CK",name:"Cook Islands"},{code:"CR",name:"Costa Rica"},{code:"HR",name:"Croatia"},{code:"CU",name:"Cuba"},{code:"CW",name:"Cura\xE7ao"},{code:"CY",name:"Cyprus"},{code:"CZ",name:"Czechia"},{code:"DK",name:"Denmark"},{code:"DJ",name:"Djibouti"},{code:"DM",name:"Dominica"},{code:"DO",name:"Dominican Republic"},{code:"CD",name:"DR Congo"},{code:"EC",name:"Ecuador"},{code:"EG",name:"Egypt"},{code:"SV",name:"El Salvador"},{code:"GQ",name:"Equatorial Guinea"},{code:"ER",name:"Eritrea"},{code:"EE",name:"Estonia"},{code:"SZ",name:"Eswatini"},{code:"ET",name:"Ethiopia"},{code:"FK",name:"Falkland Islands"},{code:"FO",name:"Faroe Islands"},{code:"FJ",name:"Fiji"},{code:"FI",name:"Finland"},{code:"FR",name:"France"},{code:"GF",name:"French Guiana"},{code:"PF",name:"French Polynesia"},{code:"TF",name:"French Southern and Antarctic Lands"},{code:"GA",name:"Gabon"},{code:"GM",name:"Gambia"},{code:"GE",name:"Georgia"},{code:"DE",name:"Germany"},{code:"GH",name:"Ghana"},{code:"GI",name:"Gibraltar"},{code:"GR",name:"Greece"},{code:"GL",name:"Greenland"},{code:"GD",name:"Grenada"},{code:"GP",name:"Guadeloupe"},{code:"GU",name:"Guam"},{code:"GT",name:"Guatemala"},{code:"GG",name:"Guernsey"},{code:"GN",name:"Guinea"},{code:"GW",name:"Guinea-Bissau"},{code:"GY",name:"Guyana"},{code:"HT",name:"Haiti"},{code:"HM",name:"Heard Island and McDonald Islands"},{code:"HN",name:"Honduras"},{code:"HK",name:"Hong Kong"},{code:"HU",name:"Hungary"},{code:"IS",name:"Iceland"},{code:"IN",name:"India"},{code:"ID",name:"Indonesia"},{code:"IR",name:"Iran"},{code:"IQ",name:"Iraq"},{code:"IE",name:"Ireland"},{code:"IM",name:"Isle of Man"},{code:"IL",name:"Israel"},{code:"IT",name:"Italy"},{code:"CI",name:"Ivory Coast"},{code:"JM",name:"Jamaica"},{code:"JP",name:"Japan"},{code:"JE",name:"Jersey"},{code:"JO",name:"Jordan"},{code:"KZ",name:"Kazakhstan"},{code:"KE",name:"Kenya"},{code:"KI",name:"Kiribati"},{code:"XK",name:"Kosovo"},{code:"KW",name:"Kuwait"},{code:"KG",name:"Kyrgyzstan"},{code:"LA",name:"Laos"},{code:"LV",name:"Latvia"},{code:"LB",name:"Lebanon"},{code:"LS",name:"Lesotho"},{code:"LR",name:"Liberia"},{code:"LY",name:"Libya"},{code:"LI",name:"Liechtenstein"},{code:"LT",name:"Lithuania"},{code:"LU",name:"Luxembourg"},{code:"MO",name:"Macau"},{code:"MG",name:"Madagascar"},{code:"MW",name:"Malawi"},{code:"MY",name:"Malaysia"},{code:"MV",name:"Maldives"},{code:"ML",name:"Mali"},{code:"MT",name:"Malta"},{code:"MH",name:"Marshall Islands"},{code:"MQ",name:"Martinique"},{code:"MR",name:"Mauritania"},{code:"MU",name:"Mauritius"},{code:"YT",name:"Mayotte"},{code:"MX",name:"Mexico"},{code:"FM",name:"Micronesia"},{code:"MD",name:"Moldova"},{code:"MC",name:"Monaco"},{code:"MN",name:"Mongolia"},{code:"ME",name:"Montenegro"},{code:"MS",name:"Montserrat"},{code:"MA",name:"Morocco"},{code:"MZ",name:"Mozambique"},{code:"MM",name:"Myanmar"},{code:"NA",name:"Namibia"},{code:"NR",name:"Nauru"},{code:"NP",name:"Nepal"},{code:"NL",name:"Netherlands"},{code:"NC",name:"New Caledonia"},{code:"NZ",name:"New Zealand"},{code:"NI",name:"Nicaragua"},{code:"NE",name:"Niger"},{code:"NG",name:"Nigeria"},{code:"NU",name:"Niue"},{code:"NF",name:"Norfolk Island"},{code:"KP",name:"North Korea"},{code:"MK",name:"North Macedonia"},{code:"MP",name:"Northern Mariana Islands"},{code:"NO",name:"Norway"},{code:"OM",name:"Oman"},{code:"PK",name:"Pakistan"},{code:"PW",name:"Palau"},{code:"PS",name:"Palestine"},{code:"PA",name:"Panama"},{code:"PG",name:"Papua New Guinea"},{code:"PY",name:"Paraguay"},{code:"PE",name:"Peru"},{code:"PH",name:"Philippines"},{code:"PN",name:"Pitcairn Islands"},{code:"PL",name:"Poland"},{code:"PT",name:"Portugal"},{code:"PR",name:"Puerto Rico"},{code:"QA",name:"Qatar"},{code:"CG",name:"Republic of the Congo"},{code:"RE",name:"R\xE9union"},{code:"RO",name:"Romania"},{code:"RU",name:"Russia"},{code:"RW",name:"Rwanda"},{code:"BL",name:"Saint Barth\xE9lemy"},{code:"SH",name:"Saint Helena, Ascension and Tristan da Cunha"},{code:"KN",name:"Saint Kitts and Nevis"},{code:"LC",name:"Saint Lucia"},{code:"MF",name:"Saint Martin"},{code:"PM",name:"Saint Pierre and Miquelon"},{code:"VC",name:"Saint Vincent and the Grenadines"},{code:"WS",name:"Samoa"},{code:"SM",name:"San Marino"},{code:"ST",name:"S\xE3o Tom\xE9 and Pr\xEDncipe"},{code:"SA",name:"Saudi Arabia"},{code:"SN",name:"Senegal"},{code:"RS",name:"Serbia"},{code:"SC",name:"Seychelles"},{code:"SL",name:"Sierra Leone"},{code:"SG",name:"Singapore"},{code:"SX",name:"Sint Maarten"},{code:"SK",name:"Slovakia"},{code:"SI",name:"Slovenia"},{code:"SB",name:"Solomon Islands"},{code:"SO",name:"Somalia"},{code:"ZA",name:"South Africa"},{code:"GS",name:"South Georgia"},{code:"KR",name:"South Korea"},{code:"SS",name:"South Sudan"},{code:"ES",name:"Spain"},{code:"LK",name:"Sri Lanka"},{code:"SD",name:"Sudan"},{code:"SR",name:"Suriname"},{code:"SJ",name:"Svalbard and Jan Mayen"},{code:"SE",name:"Sweden"},{code:"CH",name:"Switzerland"},{code:"SY",name:"Syria"},{code:"TW",name:"Taiwan"},{code:"TJ",name:"Tajikistan"},{code:"TZ",name:"Tanzania"},{code:"TH",name:"Thailand"},{code:"TL",name:"Timor-Leste"},{code:"TG",name:"Togo"},{code:"TK",name:"Tokelau"},{code:"TO",name:"Tonga"},{code:"TT",name:"Trinidad and Tobago"},{code:"TN",name:"Tunisia"},{code:"TR",name:"Turkey"},{code:"TM",name:"Turkmenistan"},{code:"TC",name:"Turks and Caicos Islands"},{code:"TV",name:"Tuvalu"},{code:"UG",name:"Uganda"},{code:"UA",name:"Ukraine"},{code:"AE",name:"United Arab Emirates"},{code:"GB",name:"United Kingdom"},{code:"US",name:"United States"},{code:"UM",name:"United States Minor Outlying Islands"},{code:"VI",name:"United States Virgin Islands"},{code:"UY",name:"Uruguay"},{code:"UZ",name:"Uzbekistan"},{code:"VU",name:"Vanuatu"},{code:"VA",name:"Vatican City"},{code:"VE",name:"Venezuela"},{code:"VN",name:"Vietnam"},{code:"WF",name:"Wallis and Futuna"},{code:"EH",name:"Western Sahara"},{code:"YE",name:"Yemen"},{code:"ZM",name:"Zambia"},{code:"ZW",name:"Zimbabwe"}];var h="http://www.w3.org/2000/svg";var v=class d{constructor(e){this.platformId=e}get isBrowser(){return ie(this.platformId)}get isServer(){return re(this.platformId)}static \u0275fac=function(t){return new(t||d)(W(j))};static \u0275prov=z({token:d,factory:d.\u0275fac,providedIn:"root"})};var M=class d{constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.bypassSecurityTrustHtml(e)}static \u0275fac=function(t){return new(t||d)(g(se,16))};static \u0275pipe=Y({name:"safeHtml",type:d,pure:!0})};var Ae=["countryLayer"];function we(d,e){if(d&1&&(H(0,"div",2,0),R(2,"safeHtml")),d&2){let t=ee();L("active",!0),I("innerHTML",B(2,3,t.countrySvg),P)}}var A=class d{constructor(e,t){this.platform=e;this.http=t}isZoomed=new K;countryCode="";countryLayer;areas=[];quantileArr=[];set countryLayerRef(e){e&&(this.countryLayer=e)}countrySvg="";regions=[];selectedRegion=null;panZoomInstanceCountry;zoomOutHandler=null;initialZoomLevel;isLoadingMap=!1;curMapHeight=0;ngAfterViewInit(){this.platform.isBrowser}zoomHandler(e){this.panZoomInstanceCountry.getZoom()<this.initialZoomLevel*.6&&this.backToWorld()}loadCountryMap(e,t){if(this.isLoadingMap)return;this.isLoadingMap=!0,this.curMapHeight=t,this.isZoomed.emit(!0),this.selectedRegion=null;let a=`assets/maps/countries/${e}/${e}.svg`;this.http.get(a,{responseType:"text"}).subscribe(c=>G(this,null,function*(){this.countrySvg=c,this.panZoomInstanceCountry&&this.panZoomInstanceCountry.destroy(),requestAnimationFrame(()=>{setTimeout(()=>G(this,null,function*(){let i=this.countryLayer.nativeElement.querySelector("svg");if(!i)return;this.curMapHeight=i.viewBox.baseVal.height;let l=["large","medium","small"],o={};l.forEach(n=>{let s=document.createElementNS(h,"g");s.setAttribute("id",`labels-${n}`),i.appendChild(s),o[n]=s});let m=Array.from(i.querySelectorAll("path[id]"));this.areas=m.map(n=>{let s=n.getBBox();return s.width*s.height});let r=[...this.areas].sort((n,s)=>n-s),p=n=>r[Math.floor(r.length*n)];this.quantileArr=[.3,.6].map(p),this.setupStyles(i),i.querySelectorAll("path[id]").forEach((n,s)=>this.setupRegions(n,s,o)),this.setupZoom(i),this.isLoadingMap=!1}),0)})}))}backToWorld(){this.isZoomed.emit(!1),this.countrySvg="",this.panZoomInstanceCountry&&this.zoomOutHandler&&this.panZoomInstanceCountry?.setOnZoom(()=>{})}setupZoom(e){return G(this,null,function*(){if(!this.platform.isBrowser)return;let{default:t}=yield import("./chunk-XIVHT3QG.js");this.panZoomInstanceCountry=t(e,{zoomEnabled:!0,controlIconsEnabled:!0,minZoom:.5,maxZoom:20}),this.initialZoomLevel=this.panZoomInstanceCountry.getZoom(),this.panZoomInstanceCountry.zoom(this.initialZoomLevel*1.0001),this.panZoomInstanceCountry.setOnZoom(a=>this.onZoom(e,a)),this.onZoom(e,this.initialZoomLevel)})}setupRegions(e,t,a){e.setAttribute("fill","#FFD8A9"),e.setAttribute("stroke","#ccc"),e.setAttribute("stroke","#000"),e.setAttribute("stroke-linejoin","round"),e.setAttribute("stroke-linecap","round");let c=this.areas[t],i="small";c>=this.quantileArr[1]?i="large":c>=this.quantileArr[0]&&(i="medium");let l=e.id?.toUpperCase(),o=e.getBBox(),m=o.x+o.width/2,r=o.y+o.height/2,p=e.dataset.name;if(p){let u=document.createElementNS(h,"title");u.textContent=p,e.appendChild(u);let n=document.createElementNS(h,"text");n.setAttribute("class",`country-label ${i}`),n.setAttribute("x",m.toString()),n.setAttribute("y",r.toString()),n.setAttribute("role","button"),n.setAttribute("tabindex","0"),n.style.cursor="pointer",n.style.pointerEvents="all",n.textContent=p,n.addEventListener("click",()=>this.onRegionClicked(e)),a[i].appendChild(n)}e.style.cursor="pointer",e.addEventListener("click",()=>this.onRegionClicked(e))}onRegionClicked(e){let t=e.id.toUpperCase();this.selectedRegion=this.regions.find(a=>a.code===t)||null}setupStyles(e){e.setAttribute("viewBox",`0 0 ${e.getAttribute("width")} ${e.getAttribute("height")}`),e.setAttribute("width","100%"),e.setAttribute("height","100%"),e.setAttribute("preserveAspectRatio","xMidYMid slice");let t=document.createElementNS(h,"style");t.textContent=`
          path {
            transition: fill 0.3s ease, stroke 0.3s ease;
          }
          path:hover {
            fill: #388e3c;
            stroke: #fff;
          stroke-width: var(--hover-stroke) !important;;
            filter: drop-shadow(0 0 2px rgba(0,0,0,0.3));
          }

            svg {
      --label-font: 6px;     /* initial font size */
      --label-opacity: 0;      /* hidden by default */
    }

    /* hover, land, etc\u2026 your existing path rules\u2026 */

    /* now label rules reference those vars */
    text.country-label {
      font-family: sans-serif;
      font-size: var(--label-font);
      fill: #000;
      text-anchor: middle;
      dominant-baseline: middle;

      /* */
      stroke: #fff;
      stroke-width: var(--label-font-cover);
      paint-order: stroke fill;
      stroke-linejoin: round;
    filter: drop-shadow(0 0 var(--label-font-cover) rgba(0,0,0,0.5));

    }

  text.country-label:hover {
    /* change fill if you want\u2026 */
    fill: #e63946;
    /* add a white border */
    stroke: #fff;
    stroke-width: var(--label-font-cover);
    paint-order: stroke fill;
    /* optional drop-shadow for extra pop */
    filter: drop-shadow(0 0 var(--label-font-cover) rgba(0,0,0,0.5));
  }
        `,e.appendChild(t)}onZoom(e,t){{t<this.initialZoomLevel*.6&&this.backToWorld();let a=14*(this.curMapHeight/600),c=.5,i={large:.5,medium:1.8,small:3},l=t,o=c*l;e.style.setProperty("--hover-stroke",`${o}px`);let m=(a*(1/l)).toFixed(1)+"px",r=(a*(.2/l)).toFixed(1)+"px",p=e.style;Object.entries(i).forEach(([u,n])=>{let s=e.querySelector(`#labels-${u}`);if(!s)return;let f=l>=n;f?s.removeAttribute("display"):s.setAttribute("display","none"),s.style.opacity=f?"1":"0"}),p.setProperty("--label-font",m),p.setProperty("--label-font-cover",r)}}static \u0275fac=function(t){return new(t||d)(g(v),g(V))};static \u0275cmp=Z({type:d,selectors:[["app-country-map"]],viewQuery:function(t,a){if(t&1&&S(Ae,5,U),t&2){let c;C(c=b())&&(a.countryLayerRef=c.first)}},outputs:{isZoomed:"isZoomed"},standalone:!1,decls:2,vars:1,consts:[["countryLayer",""],["class","map-layer country",3,"active","innerHTML",4,"ngIf"],[1,"map-layer","country",3,"innerHTML"]],template:function(t,a){t&1&&(E(0,"div"),$(1,we,3,5,"div",1),T()),t&2&&(x(),I("ngIf",a.countrySvg!=""))},dependencies:[oe,M],styles:[".map-layer[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;will-change:transform,filter,opacity;transition:transform .6s ease,filter .6s ease,opacity .6s ease;transform-origin:center center;pointer-events:none;opacity:0;visibility:hidden;transition:opacity .3s ease,visibility 0s linear .3s}.map-layer[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block;width:100%!important;height:100%!important}.map-layer.zoomed[_ngcontent-%COMP%]{transform:scale(2);filter:blur(5px)}.map-layer.country[_ngcontent-%COMP%]{opacity:0;pointer-events:none}.map-layer.country.active[_ngcontent-%COMP%]{pointer-events:all;opacity:1;visibility:visible;transition:opacity .3s ease}"]})};var Ee=["worldLayer"],Ge=["countryLayer"],Pe=["mapWrapper"],k=class d{constructor(e,t,a){this.platform=e;this.http=t;this.cd=a}worldLayer;countryLayer;countryCmp;mapWrapperRef;curHeight=0;curWidth=0;svgEl;worldSvg="";countrySvg="";svgContent="";cachedSvg=null;countryMap={};currentCountryCode="";regions=[];selectedRegion=null;selectedCountryCode=null;panZoomInstance;panZoomInstanceCountry;initialZoomLevel;isLoadingMap=!1;hasInitializedSvg;isZoomed=!1;isScreenWide=!1;worldMapLineBorderThickness=.5;quantileArr=[];areas=[];ngAfterViewInit(){if(!this.platform.isBrowser)return;let e=this.mapWrapperRef.nativeElement;this.curHeight=e.offsetHeight,this.curWidth=e.offsetWidth,le.forEach(t=>{this.countryMap[t.code.toUpperCase()]=t.name}),this.loadWorldMap()}loadWorldMap(){if(this.isLoadingMap)return;this.isLoadingMap=!0;let e=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.initializeSVG(),this.isLoadingMap=!1})})};this.cachedSvg?(this.svgContent=this.cachedSvg,this.worldSvg=this.cachedSvg,e()):this.http.get("assets/maps/world-map-final5.svg",{responseType:"text"}).subscribe(t=>{this.cachedSvg=t,this.svgContent=t,this.worldSvg=t,e()}),this.isLoadingMap=!1}initializeSVG(){let e=this.worldLayer.nativeElement.querySelector("svg");if(!e)return;this.svgEl=e,e.style.backgroundColor="#ADD8E6";let t=["vlarge","large","medium","small","vsmall"],a={};t.forEach(m=>{let r=document.createElementNS(h,"g");r.setAttribute("id",`labels-${m}`),e.appendChild(r),a[m]=r});let c=Array.from(e.querySelectorAll("path[id]"));this.areas=c.map(m=>{let r=m.getBBox();return r.width*r.height});let i=[...this.areas].sort((m,r)=>m-r),l=m=>i[Math.floor(i.length*m)];this.quantileArr=[.2,.4,.6,.9].map(l),this.setupZoom(e),this.injectHoverStyles(e),e.querySelectorAll("path[id]").forEach((m,r)=>this.setupCountry(m,e,r,a))}setupZoom(e){if(!this.platform.isBrowser)return;let t=e.getAttribute("width"),a=e.getAttribute("height"),c=1e3/482,i=1,l=this.curHeight,o=this.curHeight*c;this.initialZoomLevel=this.curHeight/482,this.curWidth/this.curHeight>c&&(this.isScreenWide=!0,o=this.curWidth,l=o/c,this.initialZoomLevel=this.curWidth/1e3),e.setAttribute("width",o.toString()),e.setAttribute("height",l.toString()),e.setAttribute("preserveAspectRatio","xMidYMid meet"),import("./chunk-XIVHT3QG.js").then(m=>{let r=m.default;this.panZoomInstance=r(e,{zoomEnabled:!0,controlIconsEnabled:!0,fit:!0,center:!0,minZoom:.5,maxZoom:1e3,onPan:f=>{console.log(`Pan changed \u2192 x: ${f.x}, y: ${f.y}`)}});let p=this.panZoomInstance.getSizes(),u=1e3/482,n=p.height*u,s=1;this.panZoomInstance.center(),this.panZoomInstance.resize(),this.panZoomInstance.setMinZoom(s),this.onZoomHandler(s),this.panZoomInstance.setBeforePan((f,w)=>{let y=this.panZoomInstance.getSizes(),O=y.viewBox.width*y.realZoom,_=y.viewBox.height*y.realZoom,fe=this.curWidth,ge=this.curHeight,ye=Math.min(0,fe-O),Se=0,Ce=Math.min(0,ge-_);return{x:Math.max(ye,Math.min(w.x,Se)),y:Math.max(Ce,Math.min(w.y,0))}}),this.panZoomInstance.setOnZoom(f=>{this.onZoomHandler(f)})}).catch(m=>{console.error("Could not load svg-pan-zoom in browser:",m)})}injectHoverStyles(e){let t=document.createElementNS(h,"style");e.style.setProperty("--hover-stroke","1px"),t.textContent=`
        :root {
      --label-font:        12px;
    }

        path {
          transition: fill 0.3s ease, stroke 0.3s ease;
        }
        path:hover {
          fill:rgb(246, 137, 137);
          stroke: #fff;
          stroke-width: var(--hover-stroke) !important;;
          filter: drop-shadow(0 0 2px rgba(30, 246, 178, 0.3));
        }

        /* define your vars at the SVG root */


    svg {
      --label-font: 6px;     /* initial font size */
      --label-opacity: 0;      /* hidden by default */
    }

    /* hover, land, etc\u2026 your existing path rules\u2026 */

    /* now label rules reference those vars */
    text.country-label {
      font-family: sans-serif;
      font-size: var(--label-font);
      fill: #000;
      text-anchor: middle;
      dominant-baseline: middle;

      /* */
      stroke: #fff;
      stroke-width: var(--label-font-cover);
      paint-order: stroke fill;
      stroke-linejoin: round;
    filter: drop-shadow(0 0 var(--label-font-cover) rgba(0,0,0,0.5));

    }

  text.country-label:hover {
    /* change fill if you want\u2026 */
    fill: #e63946;
    /* add a white border */
    stroke: #fff;
    stroke-width: var(--label-font-cover);
    paint-order: stroke fill;
    /* optional drop-shadow for extra pop */
    filter: drop-shadow(0 0 var(--label-font-cover) rgba(0,0,0,0.5));
  }

      `,e.appendChild(t)}setupCountry(e,t,a,c){e.setAttribute("fill","#FFD8A9"),e.setAttribute("stroke","#ccc"),e.setAttribute("stroke","#000"),e.setAttribute("stroke-linejoin","round"),e.setAttribute("stroke-linecap","round");let i=this.areas[a],l="vsmall";i>=this.quantileArr[3]?l="vlarge":i>=this.quantileArr[2]?l="large":i>=this.quantileArr[1]?l="medium":i>=this.quantileArr[0]&&(l="small");let o=e.id?.toUpperCase(),m=this.countryMap[o],r=e.getBBox(),p=r.x+r.width/2,u=r.y+r.height/2;if(m){let n=document.createElementNS(h,"title");n.textContent=m+" width "+r.width+" height "+r.height+" X "+r.x+" y "+r.y,e.appendChild(n);let s=document.createElementNS(h,"text");s.setAttribute("class",`country-label ${l}`),s.setAttribute("x",p.toString()),s.setAttribute("y",u.toString()),s.setAttribute("role","button"),s.setAttribute("tabindex","0"),s.style.cursor="pointer",s.style.pointerEvents="all",s.textContent=m,s.addEventListener("click",()=>this.onCountryClicked(e,r.height)),c[l].appendChild(s)}e.style.cursor="pointer",e.addEventListener("click",()=>this.onCountryClicked(e,r.height))}onCountryClicked(e,t){if(!this.panZoomInstance)return;let{x:a,y:c}=this.panZoomInstance.getPan();console.log("curX",a,"curY",c),setTimeout(()=>{let i=e.id.toUpperCase();this.currentCountryCode=i;let l=this.svgEl.getElementById(i);if(!l)return console.warn(`No path for ${i}`);let o=l.getBBox(),m=this.panZoomInstance.getSizes(),r=m.width,p=m.height,u=p*(o.height/482),n=p/u;n=482/o.height,n=this.curHeight/(o.height*this.initialZoomLevel),o.width/o.height>this.curWidth/this.curHeight&&(n=this.curWidth*1e3/o.width/(this.curHeight*1e3/482)),this.panZoomInstance.zoom(n);let s=o.x+o.width,f=o.y+o.height,w=0,y=0;o.width/o.height<=this.curWidth/this.curHeight?w=this.curWidth/2-o.width*this.initialZoomLevel*n/2:y=this.curHeight/2-o.height*this.initialZoomLevel*n/2;let O=-o.x*n*this.initialZoomLevel+w,_=-o.y*n*this.initialZoomLevel+y;this.panZoomInstance.pan({x:O,y:_}),console.log("current x pan after clicked",this.panZoomInstance.getPan().x),this.isZoomed=!0,this.cd.detectChanges(),this.countryCmp.loadCountryMap(i,t)},400)}onZoomHandler(e){let a={vlarge:.5,large:3,medium:6,small:9,vsmall:12},c=this.svgEl.querySelector("#world-map"),i=this.initialZoomLevel/e,l=this.worldMapLineBorderThickness*i;c.setAttribute("stroke-width",`${l}px`),console.log("Cur ZOom Value: ",this.panZoomInstance.getZoom()),this.svgEl.style.setProperty("--hover-stroke",`${l}px`);let o=(10*i).toFixed(1)+"px",m=(10*i/4).toFixed(1)+"px",r=this.svgEl.style;Object.entries(a).forEach(([p,u])=>{let n=this.svgEl.querySelector(`#labels-${p}`);if(!n)return;let s=1/i>=u;s?n.removeAttribute("display"):n.setAttribute("display","none"),n.style.opacity=s?"1":"0"}),r.setProperty("--label-font",o),r.setProperty("--label-font-cover",m)}static \u0275fac=function(t){return new(t||d)(g(v),g(V),g(ne))};static \u0275cmp=Z({type:d,selectors:[["app-map"]],viewQuery:function(t,a){if(t&1&&(S(Ee,7),S(Ge,7),S(A,5),S(Pe,5)),t&2){let c;C(c=b())&&(a.worldLayer=c.first),C(c=b())&&(a.countryLayer=c.first),C(c=b())&&(a.countryCmp=c.first),C(c=b())&&(a.mapWrapperRef=c.first)}},standalone:!1,decls:8,vars:5,consts:[["mapWrapper",""],["worldLayer",""],[1,"main-map"],[1,"map-wrapper"],["id","svgMap","aria-label","World map",1,"map-layer",3,"innerHTML"],[3,"isZoomed"]],template:function(t,a){if(t&1){let c=J();E(0,"div",2)(1,"div",3,0),H(3,"div",4,1),R(5,"safeHtml"),E(6,"app-country-map",5),X("isZoomed",function(l){return D(c),q(a.isZoomed=l)}),te(7,` >
`),T()()()}t&2&&(x(3),L("zoomed",a.isZoomed),I("innerHTML",B(5,3,a.worldSvg),P))},dependencies:[A,M],styles:[".main-map[_ngcontent-%COMP%]{display:block;margin-top:var(--header-height);height:calc(100vh - var(--header-height));overflow:hidden;position:relative;--label-font: 12px;--label-opacity: 0}.main-map[_ngcontent-%COMP%]   .map-wrapper[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;overflow:hidden}.main-map[_ngcontent-%COMP%]   .map-wrapper[_ngcontent-%COMP%]   .map-layer[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100dvw;height:100dvh;will-change:transform,filter,opacity;transition:transform .6s ease,filter .6s ease,opacity .6s ease;transform-origin:center center}.main-map[_ngcontent-%COMP%]   .map-wrapper[_ngcontent-%COMP%]   .map-layer[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block;width:100%!important;height:100%!important}.main-map[_ngcontent-%COMP%]   .map-wrapper[_ngcontent-%COMP%]   .map-layer.zoomed[_ngcontent-%COMP%]{filter:blur(5px)}.main-map[_ngcontent-%COMP%]   .map-wrapper[_ngcontent-%COMP%]   .map-layer.country[_ngcontent-%COMP%]{opacity:0;pointer-events:none}.main-map[_ngcontent-%COMP%]   .map-wrapper[_ngcontent-%COMP%]   .map-layer.country.active[_ngcontent-%COMP%]{opacity:1;pointer-events:all}"]})};var he=class d{static \u0275fac=function(t){return new(t||d)};static \u0275mod=Q({type:d});static \u0275inj=F({imports:[ae,me,ce.forChild([{path:"",component:k}])]})};export{he as a};
