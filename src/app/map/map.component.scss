.main-map {
  display: block;
  // width: 100%;
  margin-top: var(--header-height);

  height: calc(100vh - var(--header-height));
  overflow: hidden;
  position: relative;

  /* Custom properties for label control */
  --label-font: 12px; // base font size at zoom=1
  --label-opacity: 0; // hidden at low zoom


  .map-wrapper {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;

    .map-layer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100dvw;
      height: 100dvh;
      will-change: transform, filter, opacity;
      transition: transform 0.6s ease,
        filter 0.6s ease,
        opacity 0.6s ease;
      transform-origin: center center;

      svg {
        display: block;
        width: 100% !important;
        height: 100% !important;
      }

      &.zoomed {
        // transform: scale(2);
        filter: blur(5px);
      }

      &.country {
        opacity: 0;
        pointer-events: none;

        &.active {
          opacity: 1;
          pointer-events: all;
        }
      }
    }

    .label-overlay {
      position: absolute;
      inset: 0;
      pointer-events: none;
      /* labels won't block panning/taps */
    }

    .country-label {
      position: absolute;
      transform: translate(-50%, -50%);
      /* center on (sx, sy) */
      font: 12px/1.2 system-ui, sans-serif;
      background: rgba(255, 255, 255, 0.8);
      border: 1px solid rgba(0, 0, 0, 0.35);
      border-radius: 4px;
      padding: 1px 4px;
      white-space: nowrap;
      user-select: none;
    }
  }
}